---
  description: Stacks bars on top of each other or standardises each stack to have constant height and then convert them with ggplotly.
  function: position_stack
  permalink: /ggplot2/layers/Position adjustment/position_stack/
  layout: base
  language: ggplot2
  name: position_stack
  reference: https://ggplot2.tidyverse.org/reference/
---

Stacking is the default behaviour for most area plots.

Fill makes it easier to compare proportions.

# Bar plot

Stack:

<pre class="mcode">
p <-    
 ggplot(mtcars, aes(factor(cyl), fill = factor(vs))) +
  geom_bar()
  
plotly::ggplotly(p)
</pre>

{% capture plot_243 %}
  {% raw %}
    {"data":[{"name":"0","type":"bar","xsrc":"nadhil:1054:b7e415","x":[1,2,3],"ysrc":"nadhil:1054:1e9bad","y":[1,3,14],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(248,118,109,1)","autocolorscale":false},"basesrc":"nadhil:1054:053764","base":[10,4,0],"textsrc":"nadhil:1054:6dde1f","text":["count:1factor(cyl):4factor(vs):0","count:3factor(cyl):6factor(vs):0","count:14factor(cyl):8factor(vs):0"],"widthsrc":"nadhil:1054:b88a5b","width":[0.9,0.9,0.9],"hoverinfo":"text","showlegend":true,"legendgroup":"0","orientation":"v"},{"name":"1","type":"bar","xsrc":"nadhil:1054:15ae1a","x":[1,2],"ysrc":"nadhil:1054:7e5829","y":[10,4],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(0,191,196,1)","autocolorscale":false},"basesrc":"nadhil:1054:46e2bb","base":[0,0],"textsrc":"nadhil:1054:ab052f","text":["count:10factor(cyl):4factor(vs):1","count:4factor(cyl):6factor(vs):1"],"widthsrc":"nadhil:1054:4d7bb9","width":[0.9,0.9],"hoverinfo":"text","showlegend":true,"legendgroup":"1","orientation":"v"}],"layout":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"xaxis":{"type":"linear","range":[0.4,3.6],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"factor(cyl)"},"anchor":"y","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["4","6","8"],"tickvals":[1,2,3],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["4","6","8"],"categoryorder":"array","showticklabels":true},"yaxis":{"type":"linear","range":[-0.7,14.7],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"count"},"anchor":"x","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["0","5","10"],"tickvals":[0,5,10],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["0","5","10"],"categoryorder":"array","showticklabels":true},"legend":{"y":0.93503937007874,"font":{"size":11.689497716895,"color":"rgba(0,0,0,1)","family":""},"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756},"margin":{"b":40.1826484018265,"l":37.2602739726027,"r":7.30593607305936,"t":26.2283105022831},"shapes":[{"x0":0,"x1":1,"y0":0,"y1":1,"line":{"color":null,"width":0,"linetype":[]},"type":"rect","xref":"paper","yref":"paper","fillcolor":null}],"barmode":"relative","hovermode":"closest","showlegend":true,"annotations":[{"x":1.02,"y":1,"ax":0,"ay":0,"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"factor(vs)","xref":"paper","yref":"paper","xanchor":"left","yanchor":"bottom","showarrow":false,"textangle":0,"legendTitle":true}],"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)"},"frames":[]}
  {% endraw %}
{% endcapture %}
{% include posts/ssim_frame.html
    raw_json_file=plot_243
    ssim="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example1_ssim_map.png" 
    compare="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example1_montage.png"
%}


Fill:

<pre class="mcode">
p <-    
 ggplot(mtcars, aes(factor(cyl), fill = factor(vs))) +
  geom_bar(position = "fill")
  
plotly::ggplotly(p)
</pre>

{% capture plot_244 %}
  {% raw %}
    {"data":[{"name":"0","type":"bar","xsrc":"nadhil:1056:bd7c2a","x":[1,2,3],"ysrc":"nadhil:1056:3e55d0","y":[0.0909090909090909,0.428571428571429,1],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(248,118,109,1)","autocolorscale":false},"basesrc":"nadhil:1056:e9df7d","base":[0.909090909090909,0.571428571428571,0],"textsrc":"nadhil:1056:acc3c5","text":["count:0.09090909factor(cyl):4factor(vs):0","count:0.42857143factor(cyl):6factor(vs):0","count:1.00000000factor(cyl):8factor(vs):0"],"widthsrc":"nadhil:1056:1b19ef","width":[0.9,0.9,0.9],"hoverinfo":"text","showlegend":true,"legendgroup":"0","orientation":"v"},{"name":"1","type":"bar","xsrc":"nadhil:1056:c33aa8","x":[1,2],"ysrc":"nadhil:1056:c42a2b","y":[0.909090909090909,0.571428571428571],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(0,191,196,1)","autocolorscale":false},"basesrc":"nadhil:1056:2c8703","base":[0,0],"textsrc":"nadhil:1056:30acd2","text":["count:0.90909091factor(cyl):4factor(vs):1","count:0.57142857factor(cyl):6factor(vs):1"],"widthsrc":"nadhil:1056:2fa979","width":[0.9,0.9],"hoverinfo":"text","showlegend":true,"legendgroup":"1","orientation":"v"}],"layout":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"xaxis":{"type":"linear","range":[0.4,3.6],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"factor(cyl)"},"anchor":"y","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["4","6","8"],"tickvals":[1,2,3],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["4","6","8"],"categoryorder":"array","showticklabels":true},"yaxis":{"type":"linear","range":[-0.05,1.05],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"count"},"anchor":"x","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"categoryorder":"array","showticklabels":true},"legend":{"y":0.93503937007874,"font":{"size":11.689497716895,"color":"rgba(0,0,0,1)","family":""},"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756},"margin":{"b":40.1826484018265,"l":48.9497716894977,"r":7.30593607305936,"t":26.2283105022831},"shapes":[{"x0":0,"x1":1,"y0":0,"y1":1,"line":{"color":null,"width":0,"linetype":[]},"type":"rect","xref":"paper","yref":"paper","fillcolor":null}],"barmode":"relative","hovermode":"closest","showlegend":true,"annotations":[{"x":1.02,"y":1,"ax":0,"ay":0,"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"factor(vs)","xref":"paper","yref":"paper","xanchor":"left","yanchor":"bottom","showarrow":false,"textangle":0,"legendTitle":true}],"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)"},"frames":[]}
  {% endraw %}
{% endcapture %}
{% include posts/ssim_frame.html
    raw_json_file=plot_244
    ssim="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example2_ssim_map.png" 
    compare="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example2_montage.png"
%}


# Histogram

Stack:


<pre class="mcode">
p <-    
 ggplot(diamonds, aes(price, fill = cut)) +
  geom_histogram(binwidth = 500)
  
plotly::ggplotly(p)
</pre>



{% capture plot_245 %}
  {% raw %}
    {"data":[{"name":"Fair","type":"bar","xsrc":"nadhil:1058:e4e87e","x":[500,1000,1500,2000,2500,3000,3500,4000,4500,5000,5500,6000,6500,7000,7500,8000,8500,9000,9500,10000,10500,11000,11500,12000,12500,13000,13500,14000,14500,15000,15500,16000,16500,17000,17500,18000,18500,19000],"ysrc":"nadhil:1058:148bd9","y":[48,162,99,161,159,167,113,122,104,77,49,38,39,32,27,21,17,14,10,11,12,19,8,5,12,10,14,9,6,6,10,7,4,3,4,6,5,0],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(68,1,84,1)","autocolorscale":false},"basesrc":"nadhil:1058:c52ad8","base":[8380,9534,3807,3591,3021,2312,1963,2124,2318,1931,1473,1255,1133,912,834,655,617,615,540,480,454,462,380,344,339,329,275,273,266,232,211,254,215,230,174,201,173,23],"textsrc":"nadhil:1058:5598d2","text":["count:48price:500cut:Fair","count:162price:1000cut:Fair","count:99price:1500cut:Fair","count:161price:2000cut:Fair","count:159price:2500cut:Fair","count:167price:3000cut:Fair","count:113price:3500cut:Fair","count:122price:4000cut:Fair","count:104price:4500cut:Fair","count:77price:5000cut:Fair","count:49price:5500cut:Fair","count:38price:6000cut:Fair","count:39price:6500cut:Fair","count:32price:7000cut:Fair","count:27price:7500cut:Fair","count:21price:8000cut:Fair","count:17price:8500cut:Fair","count:14price:9000cut:Fair","count:10price:9500cut:Fair","count:11price:10000cut:Fair","count:12price:10500cut:Fair","count:19price:11000cut:Fair","count:8price:11500cut:Fair","count:5price:12000cut:Fair","count:12price:12500cut:Fair","count:10price:13000cut:Fair","count:14price:13500cut:Fair","count:9price:14000cut:Fair","count:6price:14500cut:Fair","count:6price:15000cut:Fair","count:10price:15500cut:Fair","count:7price:16000cut:Fair","count:4price:16500cut:Fair","count:3price:17000cut:Fair","count:4price:17500cut:Fair","count:6price:18000cut:Fair","count:5price:18500cut:Fair","count:0price:19000cut:Fair"],"widthsrc":"nadhil:1058:5d25e3","width":[500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500],"hoverinfo":"text","showlegend":true,"legendgroup":"Fair","orientation":"v"},{"name":"Good","type":"bar","xsrc":"nadhil:1058:95c3d6","x":[500,1000,1500,2000,2500,3000,3500,4000,4500,5000,5500,6000,6500,7000,7500,8000,8500,9000,9500,10000,10500,11000,11500,12000,12500,13000,13500,14000,14500,15000,15500,16000,16500,17000,17500,18000,18500,19000],"ysrc":"nadhil:1058:5c0bda","y":[836,502,341,335,310,232,299,368,333,198,143,142,101,96,73,61,52,53,36,36,26,28,30,22,22,27,24,23,17,21,16,25,21,8,16,16,16,1],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(59,82,139,1)","autocolorscale":false},"basesrc":"nadhil:1058:c12c97","base":[7544,9032,3466,3256,2711,2080,1664,1756,1985,1733,1330,1113,1032,816,761,594,565,562,504,444,428,434,350,322,317,302,251,250,249,211,195,229,194,222,158,185,157,22],"textsrc":"nadhil:1058:063907","text":["count:836price:500cut:Good","count:502price:1000cut:Good","count:341price:1500cut:Good","count:335price:2000cut:Good","count:310price:2500cut:Good","count:232price:3000cut:Good","count:299price:3500cut:Good","count:368price:4000cut:Good","count:333price:4500cut:Good","count:198price:5000cut:Good","count:143price:5500cut:Good","count:142price:6000cut:Good","count:101price:6500cut:Good","count:96price:7000cut:Good","count:73price:7500cut:Good","count:61price:8000cut:Good","count:52price:8500cut:Good","count:53price:9000cut:Good","count:36price:9500cut:Good","count:36price:10000cut:Good","count:26price:10500cut:Good","count:28price:11000cut:Good","count:30price:11500cut:Good","count:22price:12000cut:Good","count:22price:12500cut:Good","count:27price:13000cut:Good","count:24price:13500cut:Good","count:23price:14000cut:Good","count:17price:14500cut:Good","count:21price:15000cut:Good","count:16price:15500cut:Good","count:25price:16000cut:Good","count:21price:16500cut:Good","count:8price:17000cut:Good","count:16price:17500cut:Good","count:16price:18000cut:Good","count:16price:18500cut:Good","count:1price:19000cut:Good"],"widthsrc":"nadhil:1058:92178d","width":[500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500],"hoverinfo":"text","showlegend":true,"legendgroup":"Good","orientation":"v"},{"name":"VeryGood","type":"bar","xsrc":"nadhil:1058:d11be2","x":[500,1000,1500,2000,2500,3000,3500,4000,4500,5000,5500,6000,6500,7000,7500,8000,8500,9000,9500,10000,10500,11000,11500,12000,12500,13000,13500,14000,14500,15000,15500,16000,16500,17000,17500,18000,18500,19000],"ysrc":"nadhil:1058:546087","y":[2352,1411,836,780,791,595,483,573,661,494,360,309,265,240,209,144,132,139,120,124,106,81,91,83,75,74,57,53,55,53,45,66,47,47,36,56,34,5],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(33,144,140,1)","autocolorscale":false},"basesrc":"nadhil:1058:2d8c7c","base":[5192,7621,2630,2476,1920,1485,1181,1183,1324,1239,970,804,767,576,552,450,433,423,384,320,322,353,259,239,242,228,194,197,194,158,150,163,147,175,122,129,123,17],"textsrc":"nadhil:1058:ad58f4","text":["count:2352price:500cut:VeryGood","count:1411price:1000cut:VeryGood","count:836price:1500cut:VeryGood","count:780price:2000cut:VeryGood","count:791price:2500cut:VeryGood","count:595price:3000cut:VeryGood","count:483price:3500cut:VeryGood","count:573price:4000cut:VeryGood","count:661price:4500cut:VeryGood","count:494price:5000cut:VeryGood","count:360price:5500cut:VeryGood","count:309price:6000cut:VeryGood","count:265price:6500cut:VeryGood","count:240price:7000cut:VeryGood","count:209price:7500cut:VeryGood","count:144price:8000cut:VeryGood","count:132price:8500cut:VeryGood","count:139price:9000cut:VeryGood","count:120price:9500cut:VeryGood","count:124price:10000cut:VeryGood","count:106price:10500cut:VeryGood","count:81price:11000cut:VeryGood","count:91price:11500cut:VeryGood","count:83price:12000cut:VeryGood","count:75price:12500cut:VeryGood","count:74price:13000cut:VeryGood","count:57price:13500cut:VeryGood","count:53price:14000cut:VeryGood","count:55price:14500cut:VeryGood","count:53price:15000cut:VeryGood","count:45price:15500cut:VeryGood","count:66price:16000cut:VeryGood","count:47price:16500cut:VeryGood","count:47price:17000cut:VeryGood","count:36price:17500cut:VeryGood","count:56price:18000cut:VeryGood","count:34price:18500cut:VeryGood","count:5price:19000cut:VeryGood"],"widthsrc":"nadhil:1058:a991f6","width":[500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500],"hoverinfo":"text","showlegend":true,"legendgroup":"VeryGood","orientation":"v"},{"name":"Premium","type":"bar","xsrc":"nadhil:1058:be6325","x":[500,1000,1500,2000,2500,3000,3500,4000,4500,5000,5500,6000,6500,7000,7500,8000,8500,9000,9500,10000,10500,11000,11500,12000,12500,13000,13500,14000,14500,15000,15500,16000,16500,17000,17500,18000,18500,19000],"ysrc":"nadhil:1058:6dd3c9","y":[1693,2453,798,742,716,544,465,631,727,612,497,427,361,245,265,203,191,184,161,149,140,162,130,113,114,122,109,108,101,91,75,92,68,102,66,65,62,7],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(93,200,99,1)","autocolorscale":false},"basesrc":"nadhil:1058:1c6fec","base":[3499,5168,1832,1734,1204,941,716,552,597,627,473,377,406,331,287,247,242,239,223,171,182,191,129,126,128,106,85,89,93,67,75,71,79,73,56,64,61,10],"textsrc":"nadhil:1058:ba7ae3","text":["count:1693price:500cut:Premium","count:2453price:1000cut:Premium","count:798price:1500cut:Premium","count:742price:2000cut:Premium","count:716price:2500cut:Premium","count:544price:3000cut:Premium","count:465price:3500cut:Premium","count:631price:4000cut:Premium","count:727price:4500cut:Premium","count:612price:5000cut:Premium","count:497price:5500cut:Premium","count:427price:6000cut:Premium","count:361price:6500cut:Premium","count:245price:7000cut:Premium","count:265price:7500cut:Premium","count:203price:8000cut:Premium","count:191price:8500cut:Premium","count:184price:9000cut:Premium","count:161price:9500cut:Premium","count:149price:10000cut:Premium","count:140price:10500cut:Premium","count:162price:11000cut:Premium","count:130price:11500cut:Premium","count:113price:12000cut:Premium","count:114price:12500cut:Premium","count:122price:13000cut:Premium","count:109price:13500cut:Premium","count:108price:14000cut:Premium","count:101price:14500cut:Premium","count:91price:15000cut:Premium","count:75price:15500cut:Premium","count:92price:16000cut:Premium","count:68price:16500cut:Premium","count:102price:17000cut:Premium","count:66price:17500cut:Premium","count:65price:18000cut:Premium","count:62price:18500cut:Premium","count:7price:19000cut:Premium"],"widthsrc":"nadhil:1058:770086","width":[500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500],"hoverinfo":"text","showlegend":true,"legendgroup":"Premium","orientation":"v"},{"name":"Ideal","type":"bar","xsrc":"nadhil:1058:52278d","x":[500,1000,1500,2000,2500,3000,3500,4000,4500,5000,5500,6000,6500,7000,7500,8000,8500,9000,9500,10000,10500,11000,11500,12000,12500,13000,13500,14000,14500,15000,15500,16000,16500,17000,17500,18000,18500,19000],"ysrc":"nadhil:1058:ba319e","y":[3499,5168,1832,1734,1204,941,716,552,597,627,473,377,406,331,287,247,242,239,223,171,182,191,129,126,128,106,85,89,93,67,75,71,79,73,56,64,61,10],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(253,231,37,1)","autocolorscale":false},"basesrc":"nadhil:1058:7a367f","base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"textsrc":"nadhil:1058:808666","text":["count:3499price:500cut:Ideal","count:5168price:1000cut:Ideal","count:1832price:1500cut:Ideal","count:1734price:2000cut:Ideal","count:1204price:2500cut:Ideal","count:941price:3000cut:Ideal","count:716price:3500cut:Ideal","count:552price:4000cut:Ideal","count:597price:4500cut:Ideal","count:627price:5000cut:Ideal","count:473price:5500cut:Ideal","count:377price:6000cut:Ideal","count:406price:6500cut:Ideal","count:331price:7000cut:Ideal","count:287price:7500cut:Ideal","count:247price:8000cut:Ideal","count:242price:8500cut:Ideal","count:239price:9000cut:Ideal","count:223price:9500cut:Ideal","count:171price:10000cut:Ideal","count:182price:10500cut:Ideal","count:191price:11000cut:Ideal","count:129price:11500cut:Ideal","count:126price:12000cut:Ideal","count:128price:12500cut:Ideal","count:106price:13000cut:Ideal","count:85price:13500cut:Ideal","count:89price:14000cut:Ideal","count:93price:14500cut:Ideal","count:67price:15000cut:Ideal","count:75price:15500cut:Ideal","count:71price:16000cut:Ideal","count:79price:16500cut:Ideal","count:73price:17000cut:Ideal","count:56price:17500cut:Ideal","count:64price:18000cut:Ideal","count:61price:18500cut:Ideal","count:10price:19000cut:Ideal"],"widthsrc":"nadhil:1058:cd6fa6","width":[500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500],"hoverinfo":"text","showlegend":true,"legendgroup":"Ideal","orientation":"v"}],"layout":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"xaxis":{"type":"linear","range":[-700,20200],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"price"},"anchor":"y","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["0","5000","10000","15000","20000"],"tickvals":[0,5000,10000,15000,20000],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["0","5000","10000","15000","20000"],"categoryorder":"array","showticklabels":true},"yaxis":{"type":"linear","range":[-484.8,10180.8],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"count"},"anchor":"x","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["0","2500","5000","7500","10000"],"tickvals":[0,2500,5000,7500,10000],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["0","2500","5000","7500","10000"],"categoryorder":"array","showticklabels":true},"legend":{"y":0.93503937007874,"font":{"size":11.689497716895,"color":"rgba(0,0,0,1)","family":""},"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756},"margin":{"b":40.1826484018265,"l":54.7945205479452,"r":7.30593607305936,"t":26.2283105022831},"shapes":[{"x0":0,"x1":1,"y0":0,"y1":1,"line":{"color":null,"width":0,"linetype":[]},"type":"rect","xref":"paper","yref":"paper","fillcolor":null}],"barmode":"relative","hovermode":"closest","showlegend":true,"annotations":[{"x":1.02,"y":1,"ax":0,"ay":0,"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"cut","xref":"paper","yref":"paper","xanchor":"left","yanchor":"bottom","showarrow":false,"textangle":0,"legendTitle":true}],"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)"},"frames":[]}
  {% endraw %}
{% endcapture %}
{% include posts/ssim_frame.html
    raw_json_file=plot_245
    ssim="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example3_ssim_map.png" 
    compare="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example3_montage.png"
%}

Fill:

<pre class="mcode">
p <-    
 ggplot(diamonds, aes(price, fill = cut)) +
  geom_histogram(binwidth = 500, position = "fill")
  
plotly::ggplotly(p)
</pre>



{% capture plot_246 %}
  {% raw %}
    {"data":[{"name":"Fair","type":"bar","xsrc":"nadhil:1060:4d1399","x":[500,1000,1500,2000,2500,3000,3500,4000,4500,5000,5500,6000,6500,7000,7500,8000,8500,9000,9500,10000,10500,11000,11500,12000,12500,13000,13500,14000,14500,15000,15500,16000,16500,17000,17500,18000,18500,19000],"ysrc":"nadhil:1060:f59118","y":[0.00569530137636454,0.0167079207920792,0.0253456221198156,0.042910447761194,0.05,0.0673658733360226,0.0544315992292871,0.0543187889581478,0.0429397192402973,0.0383466135458167,0.0321944809461235,0.0293890177880897,0.0332764505119454,0.0338983050847458,0.0313588850174216,0.0310650887573964,0.026813880126183,0.0222575516693164,0.0181818181818182,0.0224032586558045,0.0257510729613734,0.0395010395010394,0.020618556701031,0.0143266475644699,0.0341880341880342,0.0294985250737463,0.0484429065743944,0.0319148936170213,0.0220588235294118,0.0252100840336135,0.0452488687782805,0.0268199233716475,0.0182648401826484,0.0128755364806867,0.0224719101123596,0.0289855072463768,0.0280898876404494,0],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(68,1,84,1)","autocolorscale":false},"basesrc":"nadhil:1060:0661b2","base":[0.994304698623635,0.983292079207921,0.974654377880184,0.957089552238806,0.95,0.932634126663977,0.945568400770713,0.945681211041852,0.957060280759703,0.961653386454183,0.967805519053876,0.97061098221191,0.966723549488055,0.966101694915254,0.968641114982578,0.968934911242604,0.973186119873817,0.977742448330684,0.981818181818182,0.977596741344195,0.974248927038627,0.960498960498961,0.979381443298969,0.98567335243553,0.965811965811966,0.970501474926254,0.951557093425606,0.968085106382979,0.977941176470588,0.974789915966387,0.95475113122172,0.973180076628352,0.981735159817352,0.987124463519313,0.97752808988764,0.971014492753623,0.971910112359551,1],"textsrc":"nadhil:1060:e56439","text":["count:0.005695301price:500cut:Fair","count:0.016707921price:1000cut:Fair","count:0.025345622price:1500cut:Fair","count:0.042910448price:2000cut:Fair","count:0.050000000price:2500cut:Fair","count:0.067365873price:3000cut:Fair","count:0.054431599price:3500cut:Fair","count:0.054318789price:4000cut:Fair","count:0.042939719price:4500cut:Fair","count:0.038346614price:5000cut:Fair","count:0.032194481price:5500cut:Fair","count:0.029389018price:6000cut:Fair","count:0.033276451price:6500cut:Fair","count:0.033898305price:7000cut:Fair","count:0.031358885price:7500cut:Fair","count:0.031065089price:8000cut:Fair","count:0.026813880price:8500cut:Fair","count:0.022257552price:9000cut:Fair","count:0.018181818price:9500cut:Fair","count:0.022403259price:10000cut:Fair","count:0.025751073price:10500cut:Fair","count:0.039501040price:11000cut:Fair","count:0.020618557price:11500cut:Fair","count:0.014326648price:12000cut:Fair","count:0.034188034price:12500cut:Fair","count:0.029498525price:13000cut:Fair","count:0.048442907price:13500cut:Fair","count:0.031914894price:14000cut:Fair","count:0.022058824price:14500cut:Fair","count:0.025210084price:15000cut:Fair","count:0.045248869price:15500cut:Fair","count:0.026819923price:16000cut:Fair","count:0.018264840price:16500cut:Fair","count:0.012875536price:17000cut:Fair","count:0.022471910price:17500cut:Fair","count:0.028985507price:18000cut:Fair","count:0.028089888price:18500cut:Fair","count:0.000000000price:19000cut:Fair"],"widthsrc":"nadhil:1060:83060a","width":[500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500],"hoverinfo":"text","showlegend":true,"legendgroup":"Fair","orientation":"v"},{"name":"Good","type":"bar","xsrc":"nadhil:1060:ee8f79","x":[500,1000,1500,2000,2500,3000,3500,4000,4500,5000,5500,6000,6500,7000,7500,8000,8500,9000,9500,10000,10500,11000,11500,12000,12500,13000,13500,14000,14500,15000,15500,16000,16500,17000,17500,18000,18500,19000],"ysrc":"nadhil:1060:b54588","y":[0.0991931656383483,0.0517739273927393,0.0873015873015873,0.0892857142857143,0.0974842767295597,0.0935861234368697,0.14402697495183,0.163846838824577,0.137489677952106,0.0986055776892431,0.0939553219448095,0.109822119102862,0.0861774744027304,0.101694915254237,0.0847851335656215,0.0902366863905325,0.0820189274447949,0.0842607313195548,0.0654545454545454,0.0733197556008146,0.055793991416309,0.0582120582120582,0.0773195876288659,0.0630372492836676,0.0626780626780626,0.0796460176991151,0.083044982698962,0.0815602836879433,0.0625,0.0882352941176471,0.0723981900452489,0.0957854406130269,0.0958904109589042,0.0343347639484978,0.0898876404494382,0.0772946859903382,0.0898876404494382,0.0434782608695652],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(59,82,139,1)","autocolorscale":false},"basesrc":"nadhil:1060:50f6ff","base":[0.895111532985287,0.931518151815181,0.887352790578597,0.867803837953092,0.85251572327044,0.839048003227108,0.801541425818882,0.781834372217275,0.819570602807597,0.86304780876494,0.873850197109067,0.860788863109049,0.880546075085324,0.864406779661017,0.883855981416957,0.878698224852071,0.891167192429022,0.893481717011129,0.916363636363636,0.904276985743381,0.918454935622318,0.902286902286902,0.902061855670103,0.922636103151863,0.903133903133903,0.890855457227139,0.868512110726644,0.886524822695035,0.915441176470588,0.886554621848739,0.882352941176471,0.877394636015326,0.885844748858447,0.952789699570815,0.887640449438202,0.893719806763285,0.882022471910112,0.956521739130435],"textsrc":"nadhil:1060:d43272","text":["count:0.099193166price:500cut:Good","count:0.051773927price:1000cut:Good","count:0.087301587price:1500cut:Good","count:0.089285714price:2000cut:Good","count:0.097484277price:2500cut:Good","count:0.093586123price:3000cut:Good","count:0.144026975price:3500cut:Good","count:0.163846839price:4000cut:Good","count:0.137489678price:4500cut:Good","count:0.098605578price:5000cut:Good","count:0.093955322price:5500cut:Good","count:0.109822119price:6000cut:Good","count:0.086177474price:6500cut:Good","count:0.101694915price:7000cut:Good","count:0.084785134price:7500cut:Good","count:0.090236686price:8000cut:Good","count:0.082018927price:8500cut:Good","count:0.084260731price:9000cut:Good","count:0.065454545price:9500cut:Good","count:0.073319756price:10000cut:Good","count:0.055793991price:10500cut:Good","count:0.058212058price:11000cut:Good","count:0.077319588price:11500cut:Good","count:0.063037249price:12000cut:Good","count:0.062678063price:12500cut:Good","count:0.079646018price:13000cut:Good","count:0.083044983price:13500cut:Good","count:0.081560284price:14000cut:Good","count:0.062500000price:14500cut:Good","count:0.088235294price:15000cut:Good","count:0.072398190price:15500cut:Good","count:0.095785441price:16000cut:Good","count:0.095890411price:16500cut:Good","count:0.034334764price:17000cut:Good","count:0.089887640price:17500cut:Good","count:0.077294686price:18000cut:Good","count:0.089887640price:18500cut:Good","count:0.043478261price:19000cut:Good"],"widthsrc":"nadhil:1060:64b6dc","width":[500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500],"hoverinfo":"text","showlegend":true,"legendgroup":"Good","orientation":"v"},{"name":"VeryGood","type":"bar","xsrc":"nadhil:1060:64d64a","x":[500,1000,1500,2000,2500,3000,3500,4000,4500,5000,5500,6000,6500,7000,7500,8000,8500,9000,9500,10000,10500,11000,11500,12000,12500,13000,13500,14000,14500,15000,15500,16000,16500,17000,17500,18000,18500,19000],"ysrc":"nadhil:1060:b635ea","y":[0.27906976744186,0.145523927392739,0.214029697900666,0.207889125799574,0.24874213836478,0.240016135538524,0.232658959537572,0.255120213713268,0.272914946325351,0.24601593625498,0.236530880420499,0.238979118329466,0.226109215017065,0.254237288135593,0.24274099883856,0.21301775147929,0.20820189274448,0.220985691573927,0.218181818181818,0.252545824847251,0.227467811158798,0.168399168399168,0.234536082474227,0.237822349570201,0.213675213675214,0.218289085545723,0.197231833910035,0.187943262411348,0.202205882352941,0.222689075630252,0.203619909502262,0.252873563218391,0.214611872146119,0.201716738197425,0.202247191011236,0.270531400966184,0.191011235955056,0.217391304347826],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(33,144,140,1)","autocolorscale":false},"basesrc":"nadhil:1060:8bc3e6","base":[0.616041765543427,0.785994224422442,0.673323092677931,0.659914712153518,0.60377358490566,0.599031867688584,0.56888246628131,0.526714158504007,0.546655656482246,0.61703187250996,0.637319316688568,0.621809744779582,0.654436860068259,0.610169491525424,0.641114982578397,0.665680473372781,0.682965299684543,0.672496025437202,0.698181818181818,0.65173116089613,0.690987124463519,0.733887733887734,0.667525773195876,0.684813753581662,0.689458689458689,0.672566371681416,0.671280276816609,0.698581560283688,0.713235294117647,0.663865546218487,0.678733031674208,0.624521072796935,0.671232876712329,0.751072961373391,0.685393258426966,0.623188405797101,0.691011235955056,0.739130434782609],"textsrc":"nadhil:1060:d30914","text":["count:0.279069767price:500cut:VeryGood","count:0.145523927price:1000cut:VeryGood","count:0.214029698price:1500cut:VeryGood","count:0.207889126price:2000cut:VeryGood","count:0.248742138price:2500cut:VeryGood","count:0.240016136price:3000cut:VeryGood","count:0.232658960price:3500cut:VeryGood","count:0.255120214price:4000cut:VeryGood","count:0.272914946price:4500cut:VeryGood","count:0.246015936price:5000cut:VeryGood","count:0.236530880price:5500cut:VeryGood","count:0.238979118price:6000cut:VeryGood","count:0.226109215price:6500cut:VeryGood","count:0.254237288price:7000cut:VeryGood","count:0.242740999price:7500cut:VeryGood","count:0.213017751price:8000cut:VeryGood","count:0.208201893price:8500cut:VeryGood","count:0.220985692price:9000cut:VeryGood","count:0.218181818price:9500cut:VeryGood","count:0.252545825price:10000cut:VeryGood","count:0.227467811price:10500cut:VeryGood","count:0.168399168price:11000cut:VeryGood","count:0.234536082price:11500cut:VeryGood","count:0.237822350price:12000cut:VeryGood","count:0.213675214price:12500cut:VeryGood","count:0.218289086price:13000cut:VeryGood","count:0.197231834price:13500cut:VeryGood","count:0.187943262price:14000cut:VeryGood","count:0.202205882price:14500cut:VeryGood","count:0.222689076price:15000cut:VeryGood","count:0.203619910price:15500cut:VeryGood","count:0.252873563price:16000cut:VeryGood","count:0.214611872price:16500cut:VeryGood","count:0.201716738price:17000cut:VeryGood","count:0.202247191price:17500cut:VeryGood","count:0.270531401price:18000cut:VeryGood","count:0.191011236price:18500cut:VeryGood","count:0.217391304price:19000cut:VeryGood"],"widthsrc":"nadhil:1060:d4e039","width":[500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500],"hoverinfo":"text","showlegend":true,"legendgroup":"VeryGood","orientation":"v"},{"name":"Premium","type":"bar","xsrc":"nadhil:1060:68509a","x":[500,1000,1500,2000,2500,3000,3500,4000,4500,5000,5500,6000,6500,7000,7500,8000,8500,9000,9500,10000,10500,11000,11500,12000,12500,13000,13500,14000,14500,15000,15500,16000,16500,17000,17500,18000,18500,19000],"ysrc":"nadhil:1060:684333","y":[0.200878025628856,0.252990924092409,0.204301075268817,0.197761194029851,0.225157232704402,0.219443323920936,0.223988439306358,0.280943900267142,0.300165152766309,0.304780876494024,0.326544021024967,0.330239752513534,0.3080204778157,0.259533898305085,0.307781649245064,0.300295857988166,0.301261829652997,0.292527821939587,0.292727272727273,0.303462321792261,0.300429184549356,0.336798336798337,0.335051546391753,0.32378223495702,0.324786324786325,0.359882005899705,0.377162629757785,0.382978723404255,0.371323529411765,0.382352941176471,0.339366515837104,0.352490421455939,0.310502283105023,0.437768240343348,0.370786516853933,0.314009661835749,0.348314606741573,0.304347826086956],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(93,200,99,1)","autocolorscale":false},"basesrc":"nadhil:1060:cf55b1","base":[0.415163739914571,0.533003300330033,0.469022017409114,0.462153518123667,0.378616352201258,0.379588543767648,0.344894026974952,0.245770258236866,0.246490503715937,0.312250996015936,0.310775295663601,0.291569992266048,0.34641638225256,0.350635593220339,0.333333333333333,0.365384615384615,0.381703470031546,0.379968203497615,0.405454545454545,0.34826883910387,0.390557939914163,0.397089397089397,0.332474226804124,0.361031518624642,0.364672364672365,0.312684365781711,0.294117647058824,0.315602836879433,0.341911764705882,0.281512605042017,0.339366515837104,0.272030651340996,0.360730593607306,0.313304721030043,0.314606741573034,0.309178743961353,0.342696629213483,0.434782608695652],"textsrc":"nadhil:1060:811809","text":["count:0.200878026price:500cut:Premium","count:0.252990924price:1000cut:Premium","count:0.204301075price:1500cut:Premium","count:0.197761194price:2000cut:Premium","count:0.225157233price:2500cut:Premium","count:0.219443324price:3000cut:Premium","count:0.223988439price:3500cut:Premium","count:0.280943900price:4000cut:Premium","count:0.300165153price:4500cut:Premium","count:0.304780876price:5000cut:Premium","count:0.326544021price:5500cut:Premium","count:0.330239753price:6000cut:Premium","count:0.308020478price:6500cut:Premium","count:0.259533898price:7000cut:Premium","count:0.307781649price:7500cut:Premium","count:0.300295858price:8000cut:Premium","count:0.301261830price:8500cut:Premium","count:0.292527822price:9000cut:Premium","count:0.292727273price:9500cut:Premium","count:0.303462322price:10000cut:Premium","count:0.300429185price:10500cut:Premium","count:0.336798337price:11000cut:Premium","count:0.335051546price:11500cut:Premium","count:0.323782235price:12000cut:Premium","count:0.324786325price:12500cut:Premium","count:0.359882006price:13000cut:Premium","count:0.377162630price:13500cut:Premium","count:0.382978723price:14000cut:Premium","count:0.371323529price:14500cut:Premium","count:0.382352941price:15000cut:Premium","count:0.339366516price:15500cut:Premium","count:0.352490421price:16000cut:Premium","count:0.310502283price:16500cut:Premium","count:0.437768240price:17000cut:Premium","count:0.370786517price:17500cut:Premium","count:0.314009662price:18000cut:Premium","count:0.348314607price:18500cut:Premium","count:0.304347826price:19000cut:Premium"],"widthsrc":"nadhil:1060:2bd9ff","width":[500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500],"hoverinfo":"text","showlegend":true,"legendgroup":"Premium","orientation":"v"},{"name":"Ideal","type":"bar","xsrc":"nadhil:1060:853745","x":[500,1000,1500,2000,2500,3000,3500,4000,4500,5000,5500,6000,6500,7000,7500,8000,8500,9000,9500,10000,10500,11000,11500,12000,12500,13000,13500,14000,14500,15000,15500,16000,16500,17000,17500,18000,18500,19000],"ysrc":"nadhil:1060:1cb18d","y":[0.415163739914571,0.533003300330033,0.469022017409114,0.462153518123667,0.378616352201258,0.379588543767648,0.344894026974952,0.245770258236866,0.246490503715937,0.312250996015936,0.310775295663601,0.291569992266048,0.34641638225256,0.350635593220339,0.333333333333333,0.365384615384615,0.381703470031546,0.379968203497615,0.405454545454545,0.34826883910387,0.390557939914163,0.397089397089397,0.332474226804124,0.361031518624642,0.364672364672365,0.312684365781711,0.294117647058824,0.315602836879433,0.341911764705882,0.281512605042017,0.339366515837104,0.272030651340996,0.360730593607306,0.313304721030043,0.314606741573034,0.309178743961353,0.342696629213483,0.434782608695652],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(253,231,37,1)","autocolorscale":false},"basesrc":"nadhil:1060:1c2dfc","base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"textsrc":"nadhil:1060:3241bf","text":["count:0.415163740price:500cut:Ideal","count:0.533003300price:1000cut:Ideal","count:0.469022017price:1500cut:Ideal","count:0.462153518price:2000cut:Ideal","count:0.378616352price:2500cut:Ideal","count:0.379588544price:3000cut:Ideal","count:0.344894027price:3500cut:Ideal","count:0.245770258price:4000cut:Ideal","count:0.246490504price:4500cut:Ideal","count:0.312250996price:5000cut:Ideal","count:0.310775296price:5500cut:Ideal","count:0.291569992price:6000cut:Ideal","count:0.346416382price:6500cut:Ideal","count:0.350635593price:7000cut:Ideal","count:0.333333333price:7500cut:Ideal","count:0.365384615price:8000cut:Ideal","count:0.381703470price:8500cut:Ideal","count:0.379968203price:9000cut:Ideal","count:0.405454545price:9500cut:Ideal","count:0.348268839price:10000cut:Ideal","count:0.390557940price:10500cut:Ideal","count:0.397089397price:11000cut:Ideal","count:0.332474227price:11500cut:Ideal","count:0.361031519price:12000cut:Ideal","count:0.364672365price:12500cut:Ideal","count:0.312684366price:13000cut:Ideal","count:0.294117647price:13500cut:Ideal","count:0.315602837price:14000cut:Ideal","count:0.341911765price:14500cut:Ideal","count:0.281512605price:15000cut:Ideal","count:0.339366516price:15500cut:Ideal","count:0.272030651price:16000cut:Ideal","count:0.360730594price:16500cut:Ideal","count:0.313304721price:17000cut:Ideal","count:0.314606742price:17500cut:Ideal","count:0.309178744price:18000cut:Ideal","count:0.342696629price:18500cut:Ideal","count:0.434782609price:19000cut:Ideal"],"widthsrc":"nadhil:1060:e601db","width":[500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500],"hoverinfo":"text","showlegend":true,"legendgroup":"Ideal","orientation":"v"}],"layout":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"xaxis":{"type":"linear","range":[-700,20200],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"price"},"anchor":"y","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["0","5000","10000","15000","20000"],"tickvals":[0,5000,10000,15000,20000],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["0","5000","10000","15000","20000"],"categoryorder":"array","showticklabels":true},"yaxis":{"type":"linear","range":[-0.05,1.05],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"count"},"anchor":"x","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"categoryorder":"array","showticklabels":true},"legend":{"y":0.93503937007874,"font":{"size":11.689497716895,"color":"rgba(0,0,0,1)","family":""},"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756},"margin":{"b":40.1826484018265,"l":48.9497716894977,"r":7.30593607305936,"t":26.2283105022831},"shapes":[{"x0":0,"x1":1,"y0":0,"y1":1,"line":{"color":null,"width":0,"linetype":[]},"type":"rect","xref":"paper","yref":"paper","fillcolor":null}],"barmode":"relative","hovermode":"closest","showlegend":true,"annotations":[{"x":1.02,"y":1,"ax":0,"ay":0,"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"cut","xref":"paper","yref":"paper","xanchor":"left","yanchor":"bottom","showarrow":false,"textangle":0,"legendTitle":true}],"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)"},"frames":[]}
  {% endraw %}
{% endcapture %}
{% include posts/ssim_frame.html
    raw_json_file=plot_246
    ssim="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example4_ssim_map.png" 
    compare="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example4_montage.png"
%}


# Time series


<pre class="mcode">
series <- data.frame(
  time = c(rep(1, 4),rep(2, 4), rep(3, 4), rep(4, 4)),
  type = rep(c('a', 'b', 'c', 'd'), 4),
  value = rpois(16, 10)
)
p <-    
 ggplot(series, aes(time, value)) +
  geom_area(aes(fill = type))
  
plotly::ggplotly(p)
</pre>


{% capture plot_247 %}
  {% raw %}
    {"data":[{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"a","type":"scatter","xsrc":"nadhil:1062:72af2e","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1062:be07f2","y":[31,34,27,39,47,36,43,40,31],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1062:996b7a","text":["time:1value:9type:a","time:2value:9type:a","time:3value:9type:a","time:4value:8type:a","time:4value:8type:a","time:3value:9type:a","time:2value:9type:a","time:1value:9type:a","time:1value:9type:a"],"fillcolor":"rgba(248,118,109,1)","hoverinfo":"text","showlegend":true,"legendgroup":"a"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"b","type":"scatter","xsrc":"nadhil:1062:181339","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1062:9cb485","y":[20,29,18,32,39,27,34,31,20],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1062:fb2a13","text":["time:1value:11type:b","time:2value:5type:b","time:3value:9type:b","time:4value:7type:b","time:4value:7type:b","time:3value:9type:b","time:2value:5type:b","time:1value:11type:b","time:1value:11type:b"],"fillcolor":"rgba(124,174,0,1)","hoverinfo":"text","showlegend":true,"legendgroup":"b"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"c","type":"scatter","xsrc":"nadhil:1062:9318a8","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1062:f8bdf8","y":[12,18,9,13,32,18,29,20,12],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1062:ee6a21","text":["time:1value:8type:c","time:2value:11type:c","time:3value:9type:c","time:4value:19type:c","time:4value:19type:c","time:3value:9type:c","time:2value:11type:c","time:1value:8type:c","time:1value:8type:c"],"fillcolor":"rgba(0,191,196,1)","hoverinfo":"text","showlegend":true,"legendgroup":"c"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"d","type":"scatter","xsrc":"nadhil:1062:de6ad6","x":[1,2,3,4,4,4,3,2,1,1],"ysrc":"nadhil:1062:c423db","y":[0,0,0,0,0,13,9,18,12,0],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1062:26d1c5","text":["time:1value:12type:d","time:2value:18type:d","time:3value:9type:d","time:4value:13type:d","time:4value:13type:d","time:4value:13type:d","time:3value:9type:d","time:2value:18type:d","time:1value:12type:d","time:1value:12type:d"],"fillcolor":"rgba(199,124,255,1)","hoverinfo":"text","showlegend":true,"legendgroup":"d"}],"layout":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"xaxis":{"type":"linear","range":[0.85,4.15],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"time"},"anchor":"y","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["1","2","3","4"],"tickvals":[1,2,3,4],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["1","2","3","4"],"categoryorder":"array","showticklabels":true},"yaxis":{"type":"linear","range":[-2.35,49.35],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"value"},"anchor":"x","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["0","10","20","30","40"],"tickvals":[0,10,20,30,40],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["0","10","20","30","40"],"categoryorder":"array","showticklabels":true},"legend":{"y":0.93503937007874,"font":{"size":11.689497716895,"color":"rgba(0,0,0,1)","family":""},"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756},"margin":{"b":40.1826484018265,"l":37.2602739726027,"r":7.30593607305936,"t":26.2283105022831},"shapes":[{"x0":0,"x1":1,"y0":0,"y1":1,"line":{"color":null,"width":0,"linetype":[]},"type":"rect","xref":"paper","yref":"paper","fillcolor":null}],"barmode":"relative","hovermode":"closest","showlegend":true,"annotations":[{"x":1.02,"y":1,"ax":0,"ay":0,"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"type","xref":"paper","yref":"paper","xanchor":"left","yanchor":"bottom","showarrow":false,"textangle":0,"legendTitle":true}],"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)"},"frames":[]}
  {% endraw %}
{% endcapture %}
{% include posts/ssim_frame.html
    raw_json_file=plot_247
    ssim="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example5_ssim_map.png" 
    compare="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example5_montage.png"
%}


You control the stacking order by setting the levels of the underlying factor.



<pre class="mcode">
series <- data.frame(
  time = c(rep(1, 4),rep(2, 4), rep(3, 4), rep(4, 4)),
  type = rep(c('a', 'b', 'c', 'd'), 4),
  value = rpois(16, 10)
)
series$type2 <- factor(series$type, levels = c('c', 'b', 'd', 'a'))
p <-    
 ggplot(series, aes(time, value)) +
  geom_area(aes(fill = type2))
  
plotly::ggplotly(p)
</pre>


{% capture plot_248 %}
  {% raw %}
    {"data":[{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"c","type":"scatter","xsrc":"nadhil:1064:142ef1","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1064:34a714","y":[29,29,28,34,50,38,42,37,29],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1064:a6bd4b","text":["time:1value:8type2:c","time:2value:13type2:c","time:3value:10type2:c","time:4value:16type2:c","time:4value:16type2:c","time:3value:10type2:c","time:2value:13type2:c","time:1value:8type2:c","time:1value:8type2:c"],"fillcolor":"rgba(248,118,109,1)","hoverinfo":"text","showlegend":true,"legendgroup":"c"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"b","type":"scatter","xsrc":"nadhil:1064:1f05b7","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1064:e5c647","y":[15,19,19,21,34,28,29,29,15],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1064:f67a89","text":["time:1value:14type2:b","time:2value:10type2:b","time:3value:9type2:b","time:4value:13type2:b","time:4value:13type2:b","time:3value:9type2:b","time:2value:10type2:b","time:1value:14type2:b","time:1value:14type2:b"],"fillcolor":"rgba(124,174,0,1)","hoverinfo":"text","showlegend":true,"legendgroup":"b"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"d","type":"scatter","xsrc":"nadhil:1064:8216fc","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1064:dd1998","y":[9,9,11,10,21,19,19,15,9],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1064:6096a4","text":["time:1value:6type2:d","time:2value:10type2:d","time:3value:8type2:d","time:4value:11type2:d","time:4value:11type2:d","time:3value:8type2:d","time:2value:10type2:d","time:1value:6type2:d","time:1value:6type2:d"],"fillcolor":"rgba(0,191,196,1)","hoverinfo":"text","showlegend":true,"legendgroup":"d"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"a","type":"scatter","xsrc":"nadhil:1064:cdee25","x":[1,2,3,4,4,4,3,2,1,1],"ysrc":"nadhil:1064:5f020b","y":[0,0,0,0,0,10,11,9,9,0],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1064:d1ac14","text":["time:1value:9type2:a","time:2value:9type2:a","time:3value:11type2:a","time:4value:10type2:a","time:4value:10type2:a","time:4value:10type2:a","time:3value:11type2:a","time:2value:9type2:a","time:1value:9type2:a","time:1value:9type2:a"],"fillcolor":"rgba(199,124,255,1)","hoverinfo":"text","showlegend":true,"legendgroup":"a"}],"layout":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"xaxis":{"type":"linear","range":[0.85,4.15],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"time"},"anchor":"y","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["1","2","3","4"],"tickvals":[1,2,3,4],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["1","2","3","4"],"categoryorder":"array","showticklabels":true},"yaxis":{"type":"linear","range":[-2.5,52.5],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"value"},"anchor":"x","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["0","10","20","30","40","50"],"tickvals":[0,10,20,30,40,50],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["0","10","20","30","40","50"],"categoryorder":"array","showticklabels":true},"legend":{"y":0.93503937007874,"font":{"size":11.689497716895,"color":"rgba(0,0,0,1)","family":""},"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756},"margin":{"b":40.1826484018265,"l":37.2602739726027,"r":7.30593607305936,"t":26.2283105022831},"shapes":[{"x0":0,"x1":1,"y0":0,"y1":1,"line":{"color":null,"width":0,"linetype":[]},"type":"rect","xref":"paper","yref":"paper","fillcolor":null}],"barmode":"relative","hovermode":"closest","showlegend":true,"annotations":[{"x":1.02,"y":1,"ax":0,"ay":0,"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"type2","xref":"paper","yref":"paper","xanchor":"left","yanchor":"bottom","showarrow":false,"textangle":0,"legendTitle":true}],"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)"},"frames":[]}
  {% endraw %}
{% endcapture %}
{% include posts/ssim_frame.html
    raw_json_file=plot_248
    ssim="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example6_ssim_map.png" 
    compare="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example6_montage.png"
%}

You can change the order of the levels in the legend using the scale


<pre class="mcode">
series <- data.frame(
  time = c(rep(1, 4),rep(2, 4), rep(3, 4), rep(4, 4)),
  type = rep(c('a', 'b', 'c', 'd'), 4),
  value = rpois(16, 10)
)

series$type2 <- factor(series$type, levels = c('c', 'b', 'd', 'a'))

p <-    
 ggplot(series, aes(time, value)) +
  geom_area(aes(fill = type)) +
  scale_fill_discrete(breaks = c('a', 'b', 'c', 'd'))
  
plotly::ggplotly(p)
</pre>



{% capture plot_249 %}
  {% raw %}
    {"data":[{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"a","type":"scatter","xsrc":"nadhil:1066:bb2670","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1066:67cc70","y":[27,31,31,27,32,43,44,39,27],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1066:30ffec","text":["time:1value:12type:a","time:2value:13type:a","time:3value:12type:a","time:4value:5type:a","time:4value:5type:a","time:3value:12type:a","time:2value:13type:a","time:1value:12type:a","time:1value:12type:a"],"fillcolor":"rgba(248,118,109,1)","hoverinfo":"text","showlegend":true,"legendgroup":"a"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"b","type":"scatter","xsrc":"nadhil:1066:a9dc24","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1066:884dd3","y":[21,23,23,17,27,31,31,27,21],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1066:a4f38f","text":["time:1value:6type:b","time:2value:8type:b","time:3value:8type:b","time:4value:10type:b","time:4value:10type:b","time:3value:8type:b","time:2value:8type:b","time:1value:6type:b","time:1value:6type:b"],"fillcolor":"rgba(124,174,0,1)","hoverinfo":"text","showlegend":true,"legendgroup":"b"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"c","type":"scatter","xsrc":"nadhil:1066:38262e","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1066:9a174c","y":[11,15,11,10,17,23,23,21,11],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1066:21f257","text":["time:1value:10type:c","time:2value:8type:c","time:3value:12type:c","time:4value:7type:c","time:4value:7type:c","time:3value:12type:c","time:2value:8type:c","time:1value:10type:c","time:1value:10type:c"],"fillcolor":"rgba(0,191,196,1)","hoverinfo":"text","showlegend":true,"legendgroup":"c"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"d","type":"scatter","xsrc":"nadhil:1066:3f7480","x":[1,2,3,4,4,4,3,2,1,1],"ysrc":"nadhil:1066:00cf05","y":[0,0,0,0,0,10,11,15,11,0],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1066:ffcc36","text":["time:1value:11type:d","time:2value:15type:d","time:3value:11type:d","time:4value:10type:d","time:4value:10type:d","time:4value:10type:d","time:3value:11type:d","time:2value:15type:d","time:1value:11type:d","time:1value:11type:d"],"fillcolor":"rgba(199,124,255,1)","hoverinfo":"text","showlegend":true,"legendgroup":"d"}],"layout":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"xaxis":{"type":"linear","range":[0.85,4.15],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"time"},"anchor":"y","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["1","2","3","4"],"tickvals":[1,2,3,4],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["1","2","3","4"],"categoryorder":"array","showticklabels":true},"yaxis":{"type":"linear","range":[-2.2,46.2],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"value"},"anchor":"x","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["0","10","20","30","40"],"tickvals":[0,10,20,30,40],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["0","10","20","30","40"],"categoryorder":"array","showticklabels":true},"legend":{"y":0.93503937007874,"font":{"size":11.689497716895,"color":"rgba(0,0,0,1)","family":""},"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756},"margin":{"b":40.1826484018265,"l":37.2602739726027,"r":7.30593607305936,"t":26.2283105022831},"shapes":[{"x0":0,"x1":1,"y0":0,"y1":1,"line":{"color":null,"width":0,"linetype":[]},"type":"rect","xref":"paper","yref":"paper","fillcolor":null}],"barmode":"relative","hovermode":"closest","showlegend":true,"annotations":[{"x":1.02,"y":1,"ax":0,"ay":0,"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"type","xref":"paper","yref":"paper","xanchor":"left","yanchor":"bottom","showarrow":false,"textangle":0,"legendTitle":true}],"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)"},"frames":[]}
  {% endraw %}
{% endcapture %}
{% include posts/ssim_frame.html
    raw_json_file=plot_249
    ssim="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example7_ssim_map.png" 
    compare="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example7_montage.png"
%}

# Flipping the plot


<pre class="mcode">
series <- data.frame(
  time = c(rep(1, 4),rep(2, 4), rep(3, 4), rep(4, 4)),
  type = rep(c('a', 'b', 'c', 'd'), 4),
  value = rpois(16, 10)
)
series$type2 <- factor(series$type, levels = c('c', 'b', 'd', 'a'))
p <-    
 ggplot(series, aes(time, value)) +
  geom_area(aes(fill = type2), position = position_stack(reverse = TRUE)) +
  coord_flip() +
  theme(legend.position = "top")
  
plotly::ggplotly(p)
</pre>


{% capture plot_250 %}
  {% raw %}
    {"data":[{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"c","type":"scatter","xsrc":"nadhil:1068:5bc56c","x":[0,0,0,0,10,16,9,11,0],"ysrc":"nadhil:1068:4937bc","y":[1,2,3,4,4,3,2,1,1],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1068:ebd141","text":["time:1value:11type2:c","time:2value:9type2:c","time:3value:16type2:c","time:4value:10type2:c","time:4value:10type2:c","time:3value:16type2:c","time:2value:9type2:c","time:1value:11type2:c","time:1value:11type2:c"],"fillcolor":"rgba(248,118,109,1)","hoverinfo":"text","showlegend":true,"legendgroup":"c"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"b","type":"scatter","xsrc":"nadhil:1068:33b487","x":[11,9,16,10,19,24,17,26,11],"ysrc":"nadhil:1068:62ee2a","y":[1,2,3,4,4,3,2,1,1],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1068:4c0853","text":["time:1value:15type2:b","time:2value:8type2:b","time:3value:8type2:b","time:4value:9type2:b","time:4value:9type2:b","time:3value:8type2:b","time:2value:8type2:b","time:1value:15type2:b","time:1value:15type2:b"],"fillcolor":"rgba(124,174,0,1)","hoverinfo":"text","showlegend":true,"legendgroup":"b"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"d","type":"scatter","xsrc":"nadhil:1068:d80010","x":[26,17,24,19,26,35,29,37,26],"ysrc":"nadhil:1068:a463b6","y":[1,2,3,4,4,3,2,1,1],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1068:fa2661","text":["time:1value:11type2:d","time:2value:12type2:d","time:3value:11type2:d","time:4value:7type2:d","time:4value:7type2:d","time:3value:11type2:d","time:2value:12type2:d","time:1value:11type2:d","time:1value:11type2:d"],"fillcolor":"rgba(0,191,196,1)","hoverinfo":"text","showlegend":true,"legendgroup":"d"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"a","type":"scatter","xsrc":"nadhil:1068:f3d090","x":[37,29,35,26,26,39,44,42,47,37],"ysrc":"nadhil:1068:1fe57f","y":[1,2,3,4,4,4,3,2,1,1],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1068:a245ec","text":["time:1value:10type2:a","time:2value:13type2:a","time:3value:9type2:a","time:4value:13type2:a","time:4value:13type2:a","time:4value:13type2:a","time:3value:9type2:a","time:2value:13type2:a","time:1value:10type2:a","time:1value:10type2:a"],"fillcolor":"rgba(199,124,255,1)","hoverinfo":"text","showlegend":true,"legendgroup":"a"}],"layout":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"xaxis":{"type":"linear","range":[-2.35,49.35],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"value"},"anchor":"y","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["0","10","20","30","40"],"tickvals":[0,10,20,30,40],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["0","10","20","30","40"],"categoryorder":"array","showticklabels":true},"yaxis":{"type":"linear","range":[0.85,4.15],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"time"},"anchor":"x","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["1","2","3","4"],"tickvals":[1,2,3,4],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["1","2","3","4"],"categoryorder":"array","showticklabels":true},"legend":{"y":0.93503937007874,"font":{"size":11.689497716895,"color":"rgba(0,0,0,1)","family":""},"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756},"margin":{"b":40.1826484018265,"l":31.4155251141553,"r":7.30593607305936,"t":26.2283105022831},"shapes":[{"x0":0,"x1":1,"y0":0,"y1":1,"line":{"color":null,"width":0,"linetype":[]},"type":"rect","xref":"paper","yref":"paper","fillcolor":null}],"barmode":"relative","hovermode":"closest","showlegend":true,"annotations":[{"x":1.02,"y":1,"ax":0,"ay":0,"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"type2","xref":"paper","yref":"paper","xanchor":"left","yanchor":"bottom","showarrow":false,"textangle":0,"legendTitle":true}],"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)"},"frames":[]}
  {% endraw %}
{% endcapture %}
{% include posts/ssim_frame.html
    raw_json_file=plot_250
    ssim="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example8_ssim_map.png" 
    compare="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example8_montage.png"
%}





# Non-area plots

When stacking across multiple layers it's a good idea to always set the `group` aesthetic in the `ggplot()` call. This ensures that all layers are stacked in the same way.



<pre class="mcode">
series <- data.frame(
  time = c(rep(1, 4),rep(2, 4), rep(3, 4), rep(4, 4)),
  type = rep(c('a', 'b', 'c', 'd'), 4),
  value = rpois(16, 10)
)
series$type2 <- factor(series$type, levels = c('c', 'b', 'd', 'a'))
p <-    
 ggplot(series, aes(time, value, group = type)) +
  geom_line(aes(colour = type), position = "stack") +
  geom_point(aes(colour = type), position = "stack")
  
plotly::ggplotly(p)
</pre>


<pre class="mcode">
</pre>

{% capture plot_251 %}
  {% raw %}
    {"data":[{"line":{"dash":"solid","color":"rgba(248,118,109,1)","width":1.88976377952756},"mode":"lines+markers","name":"a","type":"scatter","xsrc":"nadhil:1070:45c8a5","x":[1,2,3,4],"ysrc":"nadhil:1070:589450","y":[30,38,45,35],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"rgba(248,118,109,1)","width":1.88976377952756},"size":5.66929133858268,"color":"rgba(248,118,109,1)","symbol":"circle","opacity":1,"autocolorscale":false},"hoveron":"points","textsrc":"nadhil:1070:4e3ed1","text":["time:1value:11type:atype:a","time:2value:10type:atype:a","time:3value:12type:atype:a","time:4value:9type:atype:a"],"hoverinfo":"text","showlegend":true,"legendgroup":"a"},{"line":{"dash":"solid","color":"rgba(124,174,0,1)","width":1.88976377952756},"mode":"lines+markers","name":"b","type":"scatter","xsrc":"nadhil:1070:9e7d27","x":[1,2,3,4],"ysrc":"nadhil:1070:ecc822","y":[19,28,33,26],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"rgba(124,174,0,1)","width":1.88976377952756},"size":5.66929133858268,"color":"rgba(124,174,0,1)","symbol":"circle","opacity":1,"autocolorscale":false},"hoveron":"points","textsrc":"nadhil:1070:e3418c","text":["time:1value:8type:btype:b","time:2value:14type:btype:b","time:3value:13type:btype:b","time:4value:12type:btype:b"],"hoverinfo":"text","showlegend":true,"legendgroup":"b"},{"line":{"dash":"solid","color":"rgba(0,191,196,1)","width":1.88976377952756},"mode":"lines+markers","name":"c","type":"scatter","xsrc":"nadhil:1070:9934fb","x":[1,2,3,4],"ysrc":"nadhil:1070:e2cd29","y":[11,14,20,14],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"rgba(0,191,196,1)","width":1.88976377952756},"size":5.66929133858268,"color":"rgba(0,191,196,1)","symbol":"circle","opacity":1,"autocolorscale":false},"hoveron":"points","textsrc":"nadhil:1070:3efe3d","text":["time:1value:4type:ctype:c","time:2value:5type:ctype:c","time:3value:10type:ctype:c","time:4value:9type:ctype:c"],"hoverinfo":"text","showlegend":true,"legendgroup":"c"},{"line":{"dash":"solid","color":"rgba(199,124,255,1)","width":1.88976377952756},"mode":"lines+markers","name":"d","type":"scatter","xsrc":"nadhil:1070:278998","x":[1,2,3,4],"ysrc":"nadhil:1070:bff459","y":[7,9,10,5],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"rgba(199,124,255,1)","width":1.88976377952756},"size":5.66929133858268,"color":"rgba(199,124,255,1)","symbol":"circle","opacity":1,"autocolorscale":false},"hoveron":"points","textsrc":"nadhil:1070:9b9d2c","text":["time:1value:7type:dtype:d","time:2value:9type:dtype:d","time:3value:10type:dtype:d","time:4value:5type:dtype:d"],"hoverinfo":"text","showlegend":true,"legendgroup":"d"}],"layout":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"xaxis":{"type":"linear","range":[0.85,4.15],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"time"},"anchor":"y","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["1","2","3","4"],"tickvals":[1,2,3,4],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["1","2","3","4"],"categoryorder":"array","showticklabels":true},"yaxis":{"type":"linear","range":[-2.25,47.25],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"value"},"anchor":"x","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["0","10","20","30","40"],"tickvals":[0,10,20,30,40],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["0","10","20","30","40"],"categoryorder":"array","showticklabels":true},"legend":{"y":0.93503937007874,"font":{"size":11.689497716895,"color":"rgba(0,0,0,1)","family":""},"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756},"margin":{"b":40.1826484018265,"l":37.2602739726027,"r":7.30593607305936,"t":26.2283105022831},"shapes":[{"x0":0,"x1":1,"y0":0,"y1":1,"line":{"color":null,"width":0,"linetype":[]},"type":"rect","xref":"paper","yref":"paper","fillcolor":null}],"barmode":"relative","hovermode":"closest","showlegend":true,"annotations":[{"x":1.02,"y":1,"ax":0,"ay":0,"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"type","xref":"paper","yref":"paper","xanchor":"left","yanchor":"bottom","showarrow":false,"textangle":0,"legendTitle":true}],"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)"},"frames":[]}
  {% endraw %}
{% endcapture %}
{% include posts/ssim_frame.html
    raw_json_file=plot_251
    ssim="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example9_ssim_map.png" 
    compare="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example9_montage.png"
%}






<pre class="mcode">
series <- data.frame(
  time = c(rep(1, 4),rep(2, 4), rep(3, 4), rep(4, 4)),
  type = rep(c('a', 'b', 'c', 'd'), 4),
  value = rpois(16, 10)
)
series$type2 <- factor(series$type, levels = c('c', 'b', 'd', 'a'))
p <-    
 ggplot(series, aes(time, value, group = type)) +
  geom_area(aes(fill = type)) +
  geom_line(aes(group = type), position = "stack")
  
plotly::ggplotly(p)
</pre>



{% capture plot_253 %}
  {% raw %}
    {"data":[{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"a","type":"scatter","xsrc":"nadhil:1074:281fbc","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1074:4ec511","y":[24,24,36,34,40,42,36,30,24],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1074:61ea79","text":["time:1value:6type:atype:a","time:2value:12type:atype:a","time:3value:6type:atype:a","time:4value:6type:atype:a","time:4value:6type:atype:a","time:3value:6type:atype:a","time:2value:12type:atype:a","time:1value:6type:atype:a","time:1value:6type:atype:a"],"fillcolor":"rgba(248,118,109,1)","hoverinfo":"text","showlegend":true,"legendgroup":"a"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"b","type":"scatter","xsrc":"nadhil:1074:a352ff","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1074:8047b0","y":[14,19,21,22,34,36,24,24,14],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1074:dbf897","text":["time:1value:10type:btype:b","time:2value:5type:btype:b","time:3value:15type:btype:b","time:4value:12type:btype:b","time:4value:12type:btype:b","time:3value:15type:btype:b","time:2value:5type:btype:b","time:1value:10type:btype:b","time:1value:10type:btype:b"],"fillcolor":"rgba(124,174,0,1)","hoverinfo":"text","showlegend":true,"legendgroup":"b"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"c","type":"scatter","xsrc":"nadhil:1074:cc3d4a","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1074:674615","y":[10,10,14,12,22,21,19,14,10],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1074:fdf780","text":["time:1value:4type:ctype:c","time:2value:9type:ctype:c","time:3value:7type:ctype:c","time:4value:10type:ctype:c","time:4value:10type:ctype:c","time:3value:7type:ctype:c","time:2value:9type:ctype:c","time:1value:4type:ctype:c","time:1value:4type:ctype:c"],"fillcolor":"rgba(0,191,196,1)","hoverinfo":"text","showlegend":true,"legendgroup":"c"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"d","type":"scatter","xsrc":"nadhil:1074:7765be","x":[1,2,3,4,4,4,3,2,1,1],"ysrc":"nadhil:1074:0d424c","y":[0,0,0,0,0,12,14,10,10,0],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1074:696959","text":["time:1value:10type:dtype:d","time:2value:10type:dtype:d","time:3value:14type:dtype:d","time:4value:12type:dtype:d","time:4value:12type:dtype:d","time:4value:12type:dtype:d","time:3value:14type:dtype:d","time:2value:10type:dtype:d","time:1value:10type:dtype:d","time:1value:10type:dtype:d"],"fillcolor":"rgba(199,124,255,1)","hoverinfo":"text","showlegend":true,"legendgroup":"d"},{"line":{"dash":"solid","color":"rgba(0,0,0,1)","width":1.88976377952756},"mode":"lines","type":"scatter","xsrc":"nadhil:1074:33e7a7","x":[1,2,3,4,null,1,2,3,4,null,1,2,3,4,null,1,2,3,4],"ysrc":"nadhil:1074:798ec8","y":[30,36,42,40,null,24,24,36,34,null,14,19,21,22,null,10,10,14,12],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1074:9adc4e","text":["time:1value:6type:a","time:2value:12type:a","time:3value:6type:a","time:4value:6type:a",null,"time:1value:10type:b","time:2value:5type:b","time:3value:15type:b","time:4value:12type:b",null,"time:1value:4type:c","time:2value:9type:c","time:3value:7type:c","time:4value:10type:c",null,"time:1value:10type:d","time:2value:10type:d","time:3value:14type:d","time:4value:12type:d"],"hoverinfo":"text","showlegend":false}],"layout":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"xaxis":{"type":"linear","range":[0.85,4.15],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"time"},"anchor":"y","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["1","2","3","4"],"tickvals":[1,2,3,4],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["1","2","3","4"],"categoryorder":"array","showticklabels":true},"yaxis":{"type":"linear","range":[-2.1,44.1],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"value"},"anchor":"x","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["0","10","20","30","40"],"tickvals":[0,10,20,30,40],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["0","10","20","30","40"],"categoryorder":"array","showticklabels":true},"legend":{"y":0.93503937007874,"font":{"size":11.689497716895,"color":"rgba(0,0,0,1)","family":""},"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756},"margin":{"b":40.1826484018265,"l":37.2602739726027,"r":7.30593607305936,"t":26.2283105022831},"shapes":[{"x0":0,"x1":1,"y0":0,"y1":1,"line":{"color":null,"width":0,"linetype":[]},"type":"rect","xref":"paper","yref":"paper","fillcolor":null}],"barmode":"relative","hovermode":"closest","showlegend":true,"annotations":[{"x":1.02,"y":1,"ax":0,"ay":0,"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"type","xref":"paper","yref":"paper","xanchor":"left","yanchor":"bottom","showarrow":false,"textangle":0,"legendTitle":true}],"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)"},"frames":[]}
  {% endraw %}
{% endcapture %}
{% include posts/ssim_frame.html
    raw_json_file=plot_253
    ssim="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example11_ssim_map.png" 
    compare="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example11_montage.png"
%}




# Stacking labels



<pre class="mcode">
series <- data.frame(
  time = c(rep(1, 4),rep(2, 4), rep(3, 4), rep(4, 4)),
  type = rep(c('a', 'b', 'c', 'd'), 4),
  value = rpois(16, 10)
)
series$type2 <- factor(series$type, levels = c('c', 'b', 'd', 'a'))
p <-    
 ggplot(series, aes(time, value, group = type)) +
  geom_area(aes(fill = type)) +
  geom_text(aes(label = type), position = "stack")
  
plotly::ggplotly(p)
</pre>



{% capture plot_254 %}
  {% raw %}
    {"data":[{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"a","type":"scatter","xsrc":"nadhil:1076:371c09","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1076:6bc6c8","y":[22,31,26,44,52,36,41,35,22],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1076:34d690","text":["time:1value:13type:atype:a","time:2value:10type:atype:a","time:3value:10type:atype:a","time:4value:8type:atype:a","time:4value:8type:atype:a","time:3value:10type:atype:a","time:2value:10type:atype:a","time:1value:13type:atype:a","time:1value:13type:atype:a"],"fillcolor":"rgba(248,118,109,1)","hoverinfo":"text","showlegend":true,"legendgroup":"a"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"b","type":"scatter","xsrc":"nadhil:1076:b309fd","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1076:680796","y":[18,22,18,27,44,26,31,22,18],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1076:49631b","text":["time:1value:4type:btype:b","time:2value:9type:btype:b","time:3value:8type:btype:b","time:4value:17type:btype:b","time:4value:17type:btype:b","time:3value:8type:btype:b","time:2value:9type:btype:b","time:1value:4type:btype:b","time:1value:4type:btype:b"],"fillcolor":"rgba(124,174,0,1)","hoverinfo":"text","showlegend":true,"legendgroup":"b"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"c","type":"scatter","xsrc":"nadhil:1076:bcf881","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1076:c3a9da","y":[6,15,10,14,27,18,22,18,6],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1076:72944c","text":["time:1value:12type:ctype:c","time:2value:7type:ctype:c","time:3value:8type:ctype:c","time:4value:13type:ctype:c","time:4value:13type:ctype:c","time:3value:8type:ctype:c","time:2value:7type:ctype:c","time:1value:12type:ctype:c","time:1value:12type:ctype:c"],"fillcolor":"rgba(0,191,196,1)","hoverinfo":"text","showlegend":true,"legendgroup":"c"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"d","type":"scatter","xsrc":"nadhil:1076:5d91b7","x":[1,2,3,4,4,4,3,2,1,1],"ysrc":"nadhil:1076:407806","y":[0,0,0,0,0,14,10,15,6,0],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1076:511471","text":["time:1value:6type:dtype:d","time:2value:15type:dtype:d","time:3value:10type:dtype:d","time:4value:14type:dtype:d","time:4value:14type:dtype:d","time:4value:14type:dtype:d","time:3value:10type:dtype:d","time:2value:15type:dtype:d","time:1value:6type:dtype:d","time:1value:6type:dtype:d"],"fillcolor":"rgba(199,124,255,1)","hoverinfo":"text","showlegend":true,"legendgroup":"d"},{"mode":"text","type":"scatter","xsrc":"nadhil:1076:3b1f8f","x":[1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4],"ysrc":"nadhil:1076:f5d766","y":[35,22,18,6,41,31,22,15,36,26,18,10,52,44,27,14],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1076:755b44","text":["a","b","c","d","a","b","c","d","a","b","c","d","a","b","c","d"],"textfont":{"size":14.6645669291339,"color":"rgba(0,0,0,1)"},"hoverinfo":"text","showlegend":false,"hovertextsrc":"nadhil:1076:583e1a","hovertext":["time:1value:13type:atype:a","time:1value:4type:btype:b","time:1value:12type:ctype:c","time:1value:6type:dtype:d","time:2value:10type:atype:a","time:2value:9type:btype:b","time:2value:7type:ctype:c","time:2value:15type:dtype:d","time:3value:10type:atype:a","time:3value:8type:btype:b","time:3value:8type:ctype:c","time:3value:10type:dtype:d","time:4value:8type:atype:a","time:4value:17type:btype:b","time:4value:13type:ctype:c","time:4value:14type:dtype:d"]}],"layout":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"xaxis":{"type":"linear","range":[0.85,4.15],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"time"},"anchor":"y","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["1","2","3","4"],"tickvals":[1,2,3,4],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["1","2","3","4"],"categoryorder":"array","showticklabels":true},"yaxis":{"type":"linear","range":[-2.6,54.6],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"value"},"anchor":"x","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["0","10","20","30","40","50"],"tickvals":[0,10,20,30,40,50],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["0","10","20","30","40","50"],"categoryorder":"array","showticklabels":true},"legend":{"y":0.93503937007874,"font":{"size":11.689497716895,"color":"rgba(0,0,0,1)","family":""},"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756},"margin":{"b":40.1826484018265,"l":37.2602739726027,"r":7.30593607305936,"t":26.2283105022831},"shapes":[{"x0":0,"x1":1,"y0":0,"y1":1,"line":{"color":null,"width":0,"linetype":[]},"type":"rect","xref":"paper","yref":"paper","fillcolor":null}],"barmode":"relative","hovermode":"closest","showlegend":true,"annotations":[{"x":1.02,"y":1,"ax":0,"ay":0,"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"type","xref":"paper","yref":"paper","xanchor":"left","yanchor":"bottom","showarrow":false,"textangle":0,"legendTitle":true}],"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)"},"frames":[]}
  {% endraw %}
{% endcapture %}
{% include posts/ssim_frame.html
    raw_json_file=plot_254
    ssim="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example12_ssim_map.png" 
    compare="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example12_montage.png"
%}




Override default position of labels with the `vjust` parameter. A `vjust` of 0.5 will center the labels inside the corresponding area.


<pre class="mcode">
series <- data.frame(
  time = c(rep(1, 4),rep(2, 4), rep(3, 4), rep(4, 4)),
  type = rep(c('a', 'b', 'c', 'd'), 4),
  value = rpois(16, 10)
)
series$type2 <- factor(series$type, levels = c('c', 'b', 'd', 'a'))
p <-    
 ggplot(series, aes(time, value, group = type)) +
  geom_area(aes(fill = type)) +
  geom_text(aes(label = type), position = position_stack(vjust = 0.5))
  
plotly::ggplotly(p)
</pre>

{% capture plot_255 %}
  {% raw %}
    {"data":[{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"a","type":"scatter","xsrc":"nadhil:1078:baff51","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1078:a1ddbe","y":[23,37,36,29,36,43,55,33,23],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1078:481b17","text":["time:1value:10type:atype:a","time:2value:18type:atype:a","time:3value:7type:atype:a","time:4value:7type:atype:a","time:4value:7type:atype:a","time:3value:7type:atype:a","time:2value:18type:atype:a","time:1value:10type:atype:a","time:1value:10type:atype:a"],"fillcolor":"rgba(248,118,109,1)","hoverinfo":"text","showlegend":true,"legendgroup":"a"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"b","type":"scatter","xsrc":"nadhil:1078:28d433","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1078:00122e","y":[18,19,18,21,29,36,37,23,18],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1078:b4c66d","text":["time:1value:5type:btype:b","time:2value:18type:btype:b","time:3value:18type:btype:b","time:4value:8type:btype:b","time:4value:8type:btype:b","time:3value:18type:btype:b","time:2value:18type:btype:b","time:1value:5type:btype:b","time:1value:5type:btype:b"],"fillcolor":"rgba(124,174,0,1)","hoverinfo":"text","showlegend":true,"legendgroup":"b"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"c","type":"scatter","xsrc":"nadhil:1078:e269bf","x":[1,2,3,4,4,3,2,1,1],"ysrc":"nadhil:1078:068aa1","y":[8,6,11,12,21,18,19,18,8],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1078:bc68a2","text":["time:1value:10type:ctype:c","time:2value:13type:ctype:c","time:3value:7type:ctype:c","time:4value:9type:ctype:c","time:4value:9type:ctype:c","time:3value:7type:ctype:c","time:2value:13type:ctype:c","time:1value:10type:ctype:c","time:1value:10type:ctype:c"],"fillcolor":"rgba(0,191,196,1)","hoverinfo":"text","showlegend":true,"legendgroup":"c"},{"fill":"toself","line":{"dash":"solid","color":"transparent","width":1.88976377952756},"mode":"lines","name":"d","type":"scatter","xsrc":"nadhil:1078:772f82","x":[1,2,3,4,4,4,3,2,1,1],"ysrc":"nadhil:1078:e5ad04","y":[0,0,0,0,0,12,11,6,8,0],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1078:920b90","text":["time:1value:8type:dtype:d","time:2value:6type:dtype:d","time:3value:11type:dtype:d","time:4value:12type:dtype:d","time:4value:12type:dtype:d","time:4value:12type:dtype:d","time:3value:11type:dtype:d","time:2value:6type:dtype:d","time:1value:8type:dtype:d","time:1value:8type:dtype:d"],"fillcolor":"rgba(199,124,255,1)","hoverinfo":"text","showlegend":true,"legendgroup":"d"},{"mode":"text","type":"scatter","xsrc":"nadhil:1078:bc1269","x":[1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4],"ysrc":"nadhil:1078:545628","y":[28,20.5,13,4,46,28,12.5,3,39.5,27,14.5,5.5,32.5,25,16.5,6],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1078:fb4c2a","text":["a","b","c","d","a","b","c","d","a","b","c","d","a","b","c","d"],"textfont":{"size":14.6645669291339,"color":"rgba(0,0,0,1)"},"hoverinfo":"text","showlegend":false,"hovertextsrc":"nadhil:1078:d89603","hovertext":["time:1value:10type:atype:a","time:1value:5type:btype:b","time:1value:10type:ctype:c","time:1value:8type:dtype:d","time:2value:18type:atype:a","time:2value:18type:btype:b","time:2value:13type:ctype:c","time:2value:6type:dtype:d","time:3value:7type:atype:a","time:3value:18type:btype:b","time:3value:7type:ctype:c","time:3value:11type:dtype:d","time:4value:7type:atype:a","time:4value:8type:btype:b","time:4value:9type:ctype:c","time:4value:12type:dtype:d"]}],"layout":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"xaxis":{"type":"linear","range":[0.85,4.15],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"time"},"anchor":"y","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["1","2","3","4"],"tickvals":[1,2,3,4],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["1","2","3","4"],"categoryorder":"array","showticklabels":true},"yaxis":{"type":"linear","range":[-2.75,57.75],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"value"},"anchor":"x","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["0","20","40"],"tickvals":[0,20,40],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["0","20","40"],"categoryorder":"array","showticklabels":true},"legend":{"y":0.93503937007874,"font":{"size":11.689497716895,"color":"rgba(0,0,0,1)","family":""},"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756},"margin":{"b":40.1826484018265,"l":37.2602739726027,"r":7.30593607305936,"t":26.2283105022831},"shapes":[{"x0":0,"x1":1,"y0":0,"y1":1,"line":{"color":null,"width":0,"linetype":[]},"type":"rect","xref":"paper","yref":"paper","fillcolor":null}],"barmode":"relative","hovermode":"closest","showlegend":true,"annotations":[{"x":1.02,"y":1,"ax":0,"ay":0,"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"type","xref":"paper","yref":"paper","xanchor":"left","yanchor":"bottom","showarrow":false,"textangle":0,"legendTitle":true}],"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)"},"frames":[]}
  {% endraw %}
{% endcapture %}
{% include posts/ssim_frame.html
    raw_json_file=plot_255
    ssim="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example13_ssim_map.png" 
    compare="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example13_montage.png"
%}



# Negative values



<pre class="mcode">
df <- tibble::tribble(
  ~x, ~y, ~grp,
  "a", 1,  "x",
  "a", 2,  "y",
  "b", 1,  "x",
  "b", 3,  "y",
  "b", -1, "y"
)
p <-    
 ggplot(data = df, aes(x, y, group = grp)) +
  geom_col(aes(fill = grp), position = position_stack(reverse = TRUE)) +
  geom_hline(yintercept = 0)
  
plotly::ggplotly(p)
</pre>


{% capture plot_256 %}
  {% raw %}
    {"data":[{"name":"x","type":"bar","xsrc":"nadhil:1080:ab946f","x":[1,2],"ysrc":"nadhil:1080:e65752","y":[1,1],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(248,118,109,1)","autocolorscale":false},"basesrc":"nadhil:1080:0f5366","base":[0,0],"textsrc":"nadhil:1080:4124de","text":["x:ay:1grp:xgrp:x","x:by:1grp:xgrp:x"],"widthsrc":"nadhil:1080:e72b83","width":[0.9,0.9],"hoverinfo":"text","showlegend":true,"legendgroup":"x","orientation":"v"},{"name":"y","type":"bar","xsrc":"nadhil:1080:1b0dfd","x":[1,2,2],"ysrc":"nadhil:1080:f6f30a","y":[2,3,1],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(0,191,196,1)","autocolorscale":false},"basesrc":"nadhil:1080:440d82","base":[1,1,-1],"textsrc":"nadhil:1080:682571","text":["x:ay:2grp:ygrp:y","x:by:3grp:ygrp:y","x:by:-1grp:ygrp:y"],"widthsrc":"nadhil:1080:514040","width":[0.9,0.9,0.9],"hoverinfo":"text","showlegend":true,"legendgroup":"y","orientation":"v"},{"line":{"dash":"solid","color":"rgba(0,0,0,1)","width":1.88976377952756},"mode":"lines","text":"yintercept:0","type":"scatter","xsrc":"nadhil:1080:393156","x":[0.4,2.6],"ysrc":"nadhil:1080:376866","y":[0,0],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","hoverinfo":"text","showlegend":false}],"layout":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"xaxis":{"type":"linear","range":[0.4,2.6],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"x"},"anchor":"y","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["a","b"],"tickvals":[1,2],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["a","b"],"categoryorder":"array","showticklabels":true},"yaxis":{"type":"linear","range":[-1.25,4.25],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"y"},"anchor":"x","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["-1","0","1","2","3","4"],"tickvals":[-1,0,1,2,3,4],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["-1","0","1","2","3","4"],"categoryorder":"array","showticklabels":true},"legend":{"y":0.93503937007874,"font":{"size":11.689497716895,"color":"rgba(0,0,0,1)","family":""},"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756},"margin":{"b":40.1826484018265,"l":37.2602739726027,"r":7.30593607305936,"t":26.2283105022831},"shapes":[{"x0":0,"x1":1,"y0":0,"y1":1,"line":{"color":null,"width":0,"linetype":[]},"type":"rect","xref":"paper","yref":"paper","fillcolor":null}],"barmode":"relative","hovermode":"closest","showlegend":true,"annotations":[{"x":1.02,"y":1,"ax":0,"ay":0,"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"grp","xref":"paper","yref":"paper","xanchor":"left","yanchor":"bottom","showarrow":false,"textangle":0,"legendTitle":true}],"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)"},"frames":[]}
  {% endraw %}
{% endcapture %}
{% include posts/ssim_frame.html
    raw_json_file=plot_256
    ssim="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example14_ssim_map.png" 
    compare="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example14_montage.png"
%}



Adding labels with `vjust` value 0.5 to center the labels in its corresponding sections.
 



<pre class="mcode">
df <- tibble::tribble(
  ~x, ~y, ~grp,
  "a", 1,  "x",
  "a", 2,  "y",
  "b", 1,  "x",
  "b", 3,  "y",
  "b", -1, "y"
)
p <-    
 ggplot(data = df, aes(x, y, group = grp)) +
  geom_col(aes(fill = grp)) +
  geom_hline(yintercept = 0) +
  geom_text(aes(label = grp), position = position_stack(vjust = 0.5))
  
plotly::ggplotly(p)
</pre>


{% capture plot_257 %}
  {% raw %}
    {"data":[{"name":"x","type":"bar","xsrc":"nadhil:1082:d46540","x":[1,2],"ysrc":"nadhil:1082:0916d4","y":[1,1],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(248,118,109,1)","autocolorscale":false},"basesrc":"nadhil:1082:c811b0","base":[2,3],"textsrc":"nadhil:1082:c87146","text":["x:ay:1grp:xgrp:x","x:by:1grp:xgrp:x"],"widthsrc":"nadhil:1082:f84be6","width":[0.9,0.9],"hoverinfo":"text","showlegend":true,"legendgroup":"x","orientation":"v"},{"name":"y","type":"bar","xsrc":"nadhil:1082:e8ace2","x":[1,2,2],"ysrc":"nadhil:1082:15ab99","y":[2,3,1],"frame":null,"xaxis":"x","yaxis":"y","marker":{"line":{"color":"transparent","width":1.88976377952756},"color":"rgba(0,191,196,1)","autocolorscale":false},"basesrc":"nadhil:1082:680e07","base":[0,0,-1],"textsrc":"nadhil:1082:b201e3","text":["x:ay:2grp:ygrp:y","x:by:3grp:ygrp:y","x:by:-1grp:ygrp:y"],"widthsrc":"nadhil:1082:039298","width":[0.9,0.9,0.9],"hoverinfo":"text","showlegend":true,"legendgroup":"y","orientation":"v"},{"line":{"dash":"solid","color":"rgba(0,0,0,1)","width":1.88976377952756},"mode":"lines","text":"yintercept:0","type":"scatter","xsrc":"nadhil:1082:be0db1","x":[0.4,2.6],"ysrc":"nadhil:1082:fa9062","y":[0,0],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","hoverinfo":"text","showlegend":false},{"mode":"text","type":"scatter","xsrc":"nadhil:1082:e99968","x":[1,1,2,2,2],"ysrc":"nadhil:1082:6e9905","y":[2.5,1,3.5,1.5,-0.5],"frame":null,"xaxis":"x","yaxis":"y","hoveron":"points","textsrc":"nadhil:1082:a298f9","text":["x","y","x","y","y"],"textfont":{"size":14.6645669291339,"color":"rgba(0,0,0,1)"},"hoverinfo":"text","showlegend":false,"hovertextsrc":"nadhil:1082:244757","hovertext":["x:ay:1grp:xgrp:x","x:ay:2grp:ygrp:y","x:by:1grp:xgrp:x","x:by:3grp:ygrp:y","x:by:-1grp:ygrp:y"]}],"layout":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"xaxis":{"type":"linear","range":[0.4,2.6],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"x"},"anchor":"y","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["a","b"],"tickvals":[1,2],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["a","b"],"categoryorder":"array","showticklabels":true},"yaxis":{"type":"linear","range":[-1.25,4.25],"ticks":"outside","title":{"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"y"},"anchor":"x","domain":[0,1],"nticks":null,"ticklen":3.65296803652968,"showgrid":true,"showline":false,"tickfont":{"size":11.689497716895,"color":"rgba(77,77,77,1)","family":""},"tickmode":"array","ticktext":["-1","0","1","2","3","4"],"tickvals":[-1,0,1,2,3,4],"zeroline":false,"autorange":false,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"linecolor":null,"linewidth":0,"tickangle":0,"tickcolor":"rgba(51,51,51,1)","tickwidth":0.66417600664176,"automargin":true,"hoverformat":".2f","categoryarray":["-1","0","1","2","3","4"],"categoryorder":"array","showticklabels":true},"legend":{"y":0.93503937007874,"font":{"size":11.689497716895,"color":"rgba(0,0,0,1)","family":""},"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756},"margin":{"b":40.1826484018265,"l":37.2602739726027,"r":7.30593607305936,"t":26.2283105022831},"shapes":[{"x0":0,"x1":1,"y0":0,"y1":1,"line":{"color":null,"width":0,"linetype":[]},"type":"rect","xref":"paper","yref":"paper","fillcolor":null}],"barmode":"relative","hovermode":"closest","showlegend":true,"annotations":[{"x":1.02,"y":1,"ax":0,"ay":0,"font":{"size":14.6118721461187,"color":"rgba(0,0,0,1)","family":""},"text":"grp","xref":"paper","yref":"paper","xanchor":"left","yanchor":"bottom","showarrow":false,"textangle":0,"legendTitle":true}],"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)"},"frames":[]}
  {% endraw %}
{% endcapture %}
{% include posts/ssim_frame.html
    raw_json_file=plot_257
    ssim="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example15_ssim_map.png" 
    compare="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_ggplot2/ggplot2/Layers/Position%20adjustment/position_stack/example15_montage.png"
%}


